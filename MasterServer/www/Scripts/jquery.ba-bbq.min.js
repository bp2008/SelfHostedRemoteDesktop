/*
 * jQuery BBQ: Back Button & Query Library - v1.3pre - 8/26/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
 /*
 * jQuery hashchange event - v1.3 - 7/21/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,A){function p(a){return"string"===typeof a}function q(a){var c=m.call(arguments,1);return function(){return a.apply(this,c.concat(m.call(arguments)))}}function t(a,c,d,e,B){var r;e!==f?(c=d.match(a?y:/^([^#?]*)\??([^#]*)(#?.*)/),d=c[3]||"",2===B&&p(e)?e=e.replace(a?z:F,""):(r=h(c[2]),e=p(e)?h[a?"fragment":"querystring"](e):e,e=2===B?e:1===B?b.extend({},e,r):b.extend({},r,e),e=u(e),a&&(e=e.replace(G,v))),a=c[1]+(a?C:e||!c[1]?"?":"")+e+d):a=c(d!==f?d:location.href);return a}function w(a,
c,d){c===f||"boolean"===typeof c?(d=c,c=l[a?"fragment":"querystring"]()):c=p(c)?c.replace(a?z:F,""):c;return h(c,d)}function x(a,c,d,e){p(d)||"object"===typeof d||(e=d,d=c,c=f);return this.each(function(){var f=b(this),r=c||H()[(this.nodeName||"").toLowerCase()]||"",k=r&&f.attr(r)||"";f.attr(r,l[a](k,d,e))})}"$:nomunge";var f,m=Array.prototype.slice,v=decodeURIComponent,l=b.param,u,g,h,D,E=b.bbq=b.bbq||{},I,J,H,K=b.event.special,F=/^.*\?|#.*$/g,z,y,G,L,C,M={};l.querystring=q(t,0,function(a){return a.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,
"$1")});l.fragment=g=q(t,1,function(a){return a.replace(y,"$2")});l.sorted=u=function(a,c){var d=[],e={};b.each(l(a,c).split("&"),function(a,c){var b=c.replace(/(?:%5B|=).*$/,""),f=e[b];f||(f=e[b]=[],d.push(b));f.push(c)});return b.map(d.sort(),function(a){return e[a]}).join("&")};g.noEscape=function(a){a=b.map((a||"").split(""),encodeURIComponent);G=new RegExp(a.join("|"),"g")};g.noEscape(",/");g.ajaxCrawlable=function(a){a!==f&&(a?(z=/^.*(?:#!|#)/,y=/^([^#]*)(?:#!|#)?(.*)$/,C="#!"):(z=/^.*#/,y=
/^([^#]*)#?(.*)$/,C="#"),L=!!a);return L};g.ajaxCrawlable(0);b.deparam=h=function(a,c){var d={},e={"true":!0,"false":!1,"null":null};b.each(a.replace(/\+/g," ").split("&"),function(a,r){var k=r.split("="),m=v(k[0]),l=d,h=0,n=m.split("]["),g=n.length-1;/\[/.test(n[0])&&/\]$/.test(n[g])?(n[g]=n[g].replace(/\]$/,""),n=n.shift().split("[").concat(n),g=n.length-1):g=0;if(2===k.length)if(k=v(k[1]),c&&(k=k&&!isNaN(k)?+k:"undefined"===k?f:e[k]!==f?e[k]:k),g)for(;h<=g;h++)m=""===n[h]?l.length:n[h],l=l[m]=
h<g?l[m]||(n[h+1]&&isNaN(n[h+1])?{}:[]):k;else b.isArray(d[m])?d[m].push(k):d[m]=d[m]!==f?[d[m],k]:k;else m&&(d[m]=c?f:"")});return d};h.querystring=q(w,0);h.fragment=D=q(w,1);b.elemUrlAttr||(b.elemUrlAttr=function(a){return b.extend(M,a)})({a:"href",base:"href",iframe:"src",img:"src",input:"src",form:"action",link:"href",script:"src"});H=b.elemUrlAttr;b.fn.querystring=q(x,"querystring");b.fn.fragment=q(x,"fragment");E.pushState=I=function(a,c){p(a)&&/^#/.test(a)&&c===f&&(c=2);var b=a!==f,b=g(location.href,
b?a:{},b?c:2);location.href=b};E.getState=J=function(a,c){return a===f||"boolean"===typeof a?D(a):D(c)[a]};E.removeState=function(a){var c={};a!==f&&(c=J(),b.each(b.isArray(a)?a:arguments,function(a,b){delete c[b]}));I(c,2)};K.hashchange=b.extend(K.hashchange,{add:function(a){function c(a){var b=a.fragment=g();a.getState=function(a,c){return a===f||"boolean"===typeof a?h(b,a):h(b,c)[a]};d.apply(this,arguments)}var d;if(b.isFunction(a))return d=a,c;d=a.handler;a.handler=c}})})(jQuery,this);
(function(b,A,p){function q(b){b=b||location.href;return"#"+b.replace(/^[^#]*#?(.*)$/,"$1")}"$:nomunge";var t,w=b.event.special,x=document.documentMode,f="onhashchange"in A&&(x===p||7<x);b.fn.hashchange=function(b){return b?this.bind("hashchange",b):this.trigger("hashchange")};b.fn.hashchange.delay=50;w.hashchange=b.extend(w.hashchange,{setup:function(){if(f)return!1;b(t.start)},teardown:function(){if(f)return!1;b(t.stop)}});t=function(){function f(){var g=q(),p=t(u);g!==u?(h(u=g,p),b(A).trigger("hashchange")):
p!==u&&(location.href=location.href.replace(/#.*/,"")+p);l=setTimeout(f,b.fn.hashchange.delay)}var v={},l,u=q(),g=function(b){return b},h=g,t=g;v.start=function(){l||f()};v.stop=function(){l&&clearTimeout(l);l=p};return v}()})(jQuery,this);